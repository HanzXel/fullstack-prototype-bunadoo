<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Full-Stack App (Student Build)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css" />
</head>
<body class="not-authenticated">

  <!-- ===== NAVBAR ===== -->
  <nav class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
      <span class="navbar-brand mb-0 h1">Full-Stack App (Hanz Joshua Bunado)</span>
      <div class="d-flex align-items-center">
        <!-- Shown when NOT logged in -->
        <a href="#" class="nav-link text-light me-3 role-logged-out" id="navLoginLink">Login</a>
        <a href="#" class="nav-link text-light role-logged-out" id="navRegisterLink">Register</a>
        <!-- Shown when logged in -->
        <div class="dropdown role-logged-in">
          <a class="nav-link dropdown-toggle text-light" href="#" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            <span id="navUsername">User</span>
          </a>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
            <li><a class="dropdown-item" href="#" data-page="profile">Profile</a></li>
            <li><a class="dropdown-item role-admin" href="#" data-page="employees">Employees</a></li>
            <li><a class="dropdown-item role-admin" href="#" data-page="accounts">Accounts</a></li>
            <li><a class="dropdown-item role-admin" href="#" data-page="departments">Departments</a></li>
            <li><a class="dropdown-item" href="#" data-page="requests">My Requests</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger" href="#" id="logoutBtn">Logout</a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- ===== MAIN ===== -->
  <main class="container mt-4">

    <!-- HOME -->
    <section id="page-home" class="page">
      <h1 class="mb-3">Welcome to Full-Stack App</h1>
      <p class="lead">A static prototype before backend integration. Simulates:</p>
      <ul>
        <li>Email registration + fake verification</li>
        <li>Login with JWT-like token simulation</li>
        <li>Role-based UI (Admin/User)</li>
        <li>CRUD for Employees, Departments, Requests</li>
      </ul>
      <div class="alert alert-info">
        ⚠️ <strong>Note:</strong> All data is stored in <code>localStorage</code>. Refresh to reset.
      </div>
      <button class="btn btn-primary" id="getStartedBtn">Get Started →</button>
    </section>

    <!-- REGISTER -->
    <section id="page-register" class="page">
      <h2 class="mb-3">Register Account</h2>
      <div id="regError" class="alert alert-danger d-none"></div>
      <div class="mb-3">
        <label class="form-label">First Name</label>
        <input type="text" class="form-control" id="regFirstName">
      </div>
      <div class="mb-3">
        <label class="form-label">Last Name</label>
        <input type="text" class="form-control" id="regLastName">
      </div>
      <div class="mb-3">
        <label class="form-label">Email</label>
        <input type="email" class="form-control" id="regEmail">
      </div>
      <div class="mb-3">
        <label class="form-label">Password</label>
        <input type="password" class="form-control" id="regPassword">
      </div>
      <button class="btn btn-success me-2" id="signUpBtn">Sign Up</button>
      <button class="btn btn-outline-secondary" data-page="home">Cancel</button>
    </section>

    <!-- VERIFY EMAIL -->
    <section id="page-verify" class="page">
      <h2 class="mb-3">Verify Your Email</h2>
      <div class="alert alert-success" id="verifyMsg">✅ A verification link has been sent to <span id="verifyEmail"></span>.</div>
      <p>For demo purposes, click below to simulate verification:</p>
      <button class="btn btn-success me-2" id="simulateVerifyBtn">✅ Simulate Email Verification</button>
      <button class="btn btn-outline-secondary" data-page="login">Go to Login</button>
    </section>

    <!-- LOGIN -->
    <section id="page-login" class="page">
      <div id="loginVerifiedAlert" class="alert alert-success d-none">✅ Email verified! You may now log in.</div>
      <h2 class="mb-3">Login</h2>
      <div class="mb-3">
        <label class="form-label">Email</label>
        <input type="email" class="form-control" id="loginEmail">
      </div>
      <div class="mb-3">
        <label class="form-label">Password</label>
        <input type="password" class="form-control" id="loginPassword">
      </div>
      <div id="loginError" class="alert alert-danger d-none"></div>
      <button class="btn btn-primary me-2" id="loginBtn">Login</button>
      <button class="btn btn-outline-secondary" data-page="home">Cancel</button>
    </section>

    <!-- PROFILE -->
    <section id="page-profile" class="page">
      <h2 class="mb-4">My Profile</h2>
      <div class="card profile-card">
        <div class="card-body p-4">
          <h5 class="profile-name mb-3" id="profileFullName"></h5>
          <div class="profile-field mb-2">
            <span class="profile-label">Email:</span>
            <span id="profileEmail"></span>
          </div>
          <div class="profile-field mb-3">
            <span class="profile-label">Role:</span>
            <span id="profileRole"></span>
          </div>
          <hr class="my-3">
          <button class="btn btn-outline-primary" id="editProfileBtn">Edit Profile</button>
        </div>
      </div>
    </section>

    <!-- EMPLOYEES (admin) -->
    <section id="page-employees" class="page role-admin">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Employees</h2>
        <button class="btn btn-success" id="addEmployeeBtn">+ Add Employee</button>
      </div>
      <table class="table table-bordered table-hover mb-4">
        <thead class="table-dark">
          <tr><th>ID</th><th>User (Email)</th><th>Position</th><th>Dept</th><th>Actions</th></tr>
        </thead>
        <tbody id="employeeTableBody">
          <tr><td colspan="5" class="text-center text-muted fst-italic">No employees yet.</td></tr>
        </tbody>
      </table>
      <div class="card d-none" id="employeeFormCard">
        <div class="card-header bg-light fw-semibold">Add/Edit Employee</div>
        <div class="card-body">
          <input type="hidden" id="empEditIndex">
          <div class="mb-3">
            <label class="form-label">Employee ID</label>
            <input type="text" class="form-control" id="empId">
          </div>
          <div class="mb-3">
            <label class="form-label">User Email <small class="text-muted">(must match an existing account)</small></label>
            <input type="email" class="form-control" id="empEmail">
            <div id="empEmailError" class="text-danger small mt-1 d-none"></div>
          </div>
          <div class="mb-3">
            <label class="form-label">Position</label>
            <input type="text" class="form-control" id="empPosition">
          </div>
          <div class="mb-3">
            <label class="form-label">Department</label>
            <select class="form-select" id="empDept"></select>
          </div>
          <div class="mb-3">
            <label class="form-label">Hire Date</label>
            <input type="date" class="form-control" id="empHireDate">
          </div>
          <button class="btn btn-primary me-2" id="saveEmployeeBtn">Save</button>
          <button class="btn btn-secondary" id="cancelEmployeeBtn">Cancel</button>
        </div>
      </div>
    </section>

    <!-- DEPARTMENTS (admin) -->
    <section id="page-departments" class="page role-admin">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Departments</h2>
        <button class="btn btn-success" id="addDeptBtn">+ Add Department</button>
      </div>
      <table class="table table-bordered table-hover mb-4">
        <thead class="table-dark">
          <tr><th>Name</th><th>Description</th><th>Actions</th></tr>
        </thead>
        <tbody id="deptTableBody"></tbody>
      </table>
      <div class="card d-none" id="deptFormCard">
        <div class="card-header bg-light fw-semibold">Add/Edit Department</div>
        <div class="card-body">
          <input type="hidden" id="deptEditIndex">
          <div class="mb-3">
            <label class="form-label">Name</label>
            <input type="text" class="form-control" id="deptName">
            <div id="deptNameError" class="text-danger small mt-1 d-none"></div>
          </div>
          <div class="mb-3">
            <label class="form-label">Description</label>
            <input type="text" class="form-control" id="deptDesc">
          </div>
          <button class="btn btn-primary me-2" id="saveDeptBtn">Save</button>
          <button class="btn btn-secondary" id="cancelDeptBtn">Cancel</button>
        </div>
      </div>
    </section>

    <!-- ACCOUNTS (admin) -->
    <section id="page-accounts" class="page role-admin">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Accounts</h2>
        <button class="btn btn-success" id="addAccountBtn">+ Add Account</button>
      </div>
      <table class="table table-bordered table-hover mb-4">
        <thead class="table-dark">
          <tr><th>Name</th><th>Email</th><th>Role</th><th class="text-center">Verified</th><th>Actions</th></tr>
        </thead>
        <tbody id="accountTableBody"></tbody>
      </table>
      <div class="card d-none" id="accountFormCard">
        <div class="card-header bg-light fw-semibold">Add/Edit Account</div>
        <div class="card-body">
          <div id="accFormError" class="alert alert-danger d-none mb-3"></div>
          <input type="hidden" id="accEditIndex">
          <div class="row mb-3">
            <div class="col">
              <label class="form-label">First Name</label>
              <input type="text" class="form-control" id="accFirstName">
            </div>
            <div class="col">
              <label class="form-label">Last Name</label>
              <input type="text" class="form-control" id="accLastName">
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">Email</label>
            <input type="email" class="form-control" id="accEmail">
          </div>
          <div class="mb-3">
            <label class="form-label">Password</label>
            <input type="password" class="form-control" id="accPassword">
            <div id="accPasswordHint" class="form-text text-muted d-none">Leave blank to keep current password.</div>
          </div>
          <div class="mb-3">
            <label class="form-label">Role</label>
            <select class="form-select" id="accRole">
              <option value="user">User</option>
              <option value="admin">Admin</option>
            </select>
          </div>
          <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="accVerified">
            <label class="form-check-label" for="accVerified">Verified</label>
          </div>
          <button class="btn btn-primary me-2" id="saveAccountBtn">Save</button>
          <button class="btn btn-secondary" id="cancelAccountBtn">Cancel</button>
        </div>
      </div>
    </section>

    <!-- REQUESTS -->
    <section id="page-requests" class="page">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>My Requests</h2>
        <button class="btn btn-success" id="newRequestBtn">+ New Request</button>
      </div>

      <!-- Empty state -->
      <div id="requestsEmpty" class="text-center py-5">
        <p class="text-muted fs-5 mb-3">You have no requests yet.</p>
        <button class="btn btn-success" id="createOneBtn">Create One</button>
      </div>

      <!-- Requests table -->
      <table class="table table-bordered table-hover d-none" id="requestsTable">
        <thead class="table-dark">
          <tr>
            <th>Date</th>
            <th>Type</th>
            <th>Items</th>
            <th class="text-center">Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="requestTableBody"></tbody>
      </table>
    </section>

  </main>

  <!-- NEW REQUEST MODAL -->
  <div class="modal fade" id="requestModal" tabindex="-1" aria-labelledby="requestModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="requestModalLabel">New Request</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Error banner -->
          <div id="reqError" class="alert alert-danger d-none mb-3"></div>

          <!-- Type -->
          <div class="mb-3">
            <label class="form-label fw-semibold">Type</label>
            <select class="form-select" id="reqType">
              <option value="Equipment">Equipment</option>
              <option value="Leave">Leave</option>
              <option value="Resources">Resources</option>
            </select>
          </div>

          <!-- Items -->
          <div class="mb-2 fw-semibold">Items</div>
          <div class="mb-1 row gx-2">
            <div class="col">
              <small class="text-muted">Item name</small>
            </div>
            <div class="col-auto" style="width:90px">
              <small class="text-muted">Qty</small>
            </div>
            <div class="col-auto" style="width:40px"></div>
          </div>
          <div id="reqItemsList"></div>
          <button type="button" class="btn btn-sm btn-outline-secondary mt-2" id="addReqItemBtn">
            + Add Item
          </button>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="submitRequestBtn">Submit Request</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="script.js"></script>
</body>
</html>